metadata:
  repository: autonomy/dianemo
policies:
- type: conventionalCommit
  spec:
    types:
    - chore
    - docs
    - perf
    - refactor
    - style
    - test
    scopes:
    - conformance
    - hack
    - image
    - init
    - initramfs
    - kernel
    - osctl
    - osd
    - rootfs
    - tools
    - '*'
script:
  template: |
    #!/bin/sh

    set -e

    mkdir -p ./build
    rm -rf ./build/*
    cd ./src/tools && conform build
    cd ../kernel && conform build
    cd ../rootfs && conform build
    cd ../initramfs && conform build
    cd ../image && conform build
    cd ../
